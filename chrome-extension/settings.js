document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("globalAutoMode"),t=document.getElementById("alwaysList"),n=document.getElementById("neverList"),s=document.getElementById("alwaysCount"),a=document.getElementById("neverCount"),o=()=>{chrome.storage.sync.get(["globalAutoMode","sitePreferences"],t=>{t.globalAutoMode&&(e.checked=!0);const n=t.sitePreferences||{};i(n)})},i=e=>{const o=[],i=[];Object.entries(e).forEach(([e,t])=>{"always"===t?o.push(e):"never"===t&&i.push(e)}),s.textContent=o.length,a.textContent=i.length,0===o.length?t.innerHTML='\n        <div class="empty-state">\n          <div class="empty-state-icon">✓</div>\n          <div class="empty-state-text">No sites configured to always enable</div>\n        </div>\n      ':t.innerHTML=o.map(e=>`\n        <div class="site-item">\n          <span class="site-domain">${e}</span>\n          <div class="site-actions">\n            <span class="site-status status-always">Always</span>\n            <button class="remove-btn" data-domain="${e}">Remove</button>\n          </div>\n        </div>\n      `).join(""),0===i.length?n.innerHTML='\n        <div class="empty-state">\n          <div class="empty-state-icon">✕</div>\n          <div class="empty-state-text">No sites configured to never enable</div>\n        </div>\n      ':n.innerHTML=i.map(e=>`\n        <div class="site-item">\n          <span class="site-domain">${e}</span>\n          <div class="site-actions">\n            <span class="site-status status-never">Never</span>\n            <button class="remove-btn" data-domain="${e}">Remove</button>\n          </div>\n        </div>\n      `).join(""),document.querySelectorAll(".remove-btn").forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.domain;c(t)})})},c=e=>{chrome.storage.sync.get(["sitePreferences"],t=>{const n=t.sitePreferences||{};delete n[e],chrome.storage.sync.set({sitePreferences:n},()=>{o()})})};e.addEventListener("change",()=>{chrome.storage.sync.set({globalAutoMode:e.checked})}),o()});